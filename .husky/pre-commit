#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üîç Running AI-powered pre-commit checks..."

# Check if .env file exists
if [ ! -f .env ]; then
  echo "‚ö†Ô∏è  .env file not found. Please copy .env.example to .env and add your OpenAI API key."
  echo "You can still commit, but AI review will be skipped."
fi

# Run AI pre-commit review (critical issues only)
echo "‚ö° Starting critical issues check..."
if node scripts/ai-unified-review.js precommit; then
  echo "‚úÖ Pre-commit review passed!"
else
  echo "‚ùå Critical issues found - commit blocked!"
  exit 1
fi
